///////////////////////////////////////////////////////////////////////////////////////////// 
/** 	
 * DemoN - Menu Side
 * Copyright (C) Gruppo36 from 1999 (All rights reserved)
 * @author Chiodi Paolo
*/
///////////////////////////////////////////////////////////////////////////////////////////// 



/////////////////////////////////////////////////////////////////////////////////////////////
/** 
 * Classe Custom Features Side Menu, estesa dalla calasse base customFeatCommon.
*/
customFeatMenuSide = function(){
	///////////////////////////////
  	$.classExtendInit(customFeatCommon, this);
	///////////////////////////////
	this._breakpointW =  992;
	this._mobileToggle = false;
	///////////////////////////////
	this._scroll = {
					'yMin': 0,
					'yMax': 0,
					'yHeader': 0,
					'yPadding': 30,
					'hFooter': 112,
	}
	///////////////////////////////
};
/////////////////////////////////////////////////////////////////////////////////////////////
$.classExtend( customFeatCommon, customFeatMenuSide );
/////////////////////////////////////////////////////////////////////////////////////////////
/** 
 * Costruttore della classe.
 * @param {Object} v dom, viewTg, view
*/
customFeatMenuSide.prototype.__construct = function( v ){
	///////////////////////////////
	this.init( v );
	///////////////////////////////
	/*
	this._dom = {
					'colMenu': $(this.Dom).find('.frame-nav'),
					'menu': $(this.Dom).find('.frame-nav .sidebar-wrapper'),
					'links': $(this.Dom).find('.sidebar-wrapper .sidebar-scroll a'),

					'colContent': $(this.Dom).find('.frame-body'),

					'mobileLink': $(this.Dom).find('.card-header-mobile'),
	};
	///////////////////////////////
	$(this._dom.links).on('click', ( e ) => {
										///////////////////////////////
										this.evClick( e.currentTarget );
						});
	///////////////////////////////
	$(this._dom.mobileLink).on('click', () => {
											///////////////////////////////
											this.evMobileLink();
						});
	*/
	///////////////////////////////
};
/////////////////////////////////////////////////////////////////////////////////////////////
customFeatMenuSide.prototype.checkScroll = function(){
	///////////////////////////////
	
  	///////////////////////////////
};
/////////////////////////////////////////////////////////////////////////////////////////////
customFeatMenuSide.prototype.evResize = function( device=false ){
	///////////////////////////////
	if( device ){
		this._device = device;
	}

	///////////////////////////////
	const menuH = Math.min($(this._dom.colMenu).outerHeight(), $(this._dom.menu).outerHeight() + this._scroll.yHeader + this._scroll.yPadding);
	const contentH = $(this._dom.colContent).outerHeight();
	const maxH = Math.max( menuH, contentH);
	const minH = Math.min( menuH, contentH);
	///////////////////////////////
	this._scroll.yMin = $(this._dom.colMenu).offset().top; 
	this._scroll.yMax = this._scroll.yMin + maxH - minH;
	this._scroll.w = $(this._dom.colMenu).outerWidth(); 
	///////////////////////////////
	this.checkScroll();
	///////////////////////////////
};
/////////////////////////////////////////////////////////////////////////////////////////////
customFeatMenuSide.prototype.evScroll = function( device ){
	///////////////////////////////
	this._device = device;
	this.checkScroll();
	///////////////////////////////
};
/////////////////////////////////////////////////////////////////////////////////////////////
customFeatMenuSide.prototype.evMobileLink = function(){
	///////////////////////////////
	$(this._dom.menu).toggleClass('show');
	///////////////////////////////
};
/////////////////////////////////////////////////////////////////////////////////////////////
customFeatMenuSide.prototype.evClick = function( dom ){
	///////////////////////////////
	$(this.Dom).find('.active:not([aria-expanded="true"])')
			   .removeClass('active');
	///////////////////////////////
	if( $(dom).attr('data-bs-toggle')=='collapse' ){ 
		///////////////////////////////
		if( $(dom).attr('aria-expanded') == 'false' ){
			$( dom ).removeClass('active');
		} else {
			$( dom ).addClass('active');
		}
	} else {
		///////////////////////////////
		$( dom ).addClass('active');
	}
	///////////////////////////////
};
/////////////////////////////////////////////////////////////////////////////////////////////
